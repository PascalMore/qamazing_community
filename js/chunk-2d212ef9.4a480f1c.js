(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d212ef9"],{ab13:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"minute",attrs:{id:"minute"}})},n=[],s=(i("99af"),i("caad"),i("a15b"),i("fb6a"),i("a434"),i("b0c0"),i("a9e3"),i("d3b7"),i("25f0"),i("2532"),i("1276"),i("96cf"),i("7510")),r=i.n(s),o=(i("9f63"),i("1247"),i("e63c")),h=i("0084"),u=i("6e85"),c=i.n(u);r.a.Chart.JSConsole.Chart.Log=function(){},r.a.Chart.JSConsole.Complier.Log=function(){};var l={props:["chartSize","wsChartData"],data:function(){return{accURL:"",first:!0,lastDate:"",originSymbol:"",dotData:this.$store.state.d2admin.dot.dotData,price:this.$store.state.d2admin.priceLine.price,Cache:"",Symbol:"",type:"",Minute:{JSChart:null,Option:{Symbol:"",Type:"分钟走势图",Windows:[],IsAutoUpdate:!1,DayCount:1,IsShowCorssCursorInfo:!0,IsShowRightMenu:!0,CorssCursorTouchEnd:!0,Info:["大盘异动"],MinuteInfo:{TextHeight:22,Font:"13px 微软雅黑",PointColor:"rgb(96,125,139)",LineColor:"rgb(96,125,139)"},MinuteLine:{IsDrawAreaPrice:!0},Border:{Left:1,Right:1,Top:20,Bottom:20},Frame:[{SplitCount:3,StringFormat:0},{SplitCount:2,StringFormat:0},{SplitCount:3,StringFormat:0}],ExtendChart:[{Name:"MinuteTooltip"}],NetworkFilter:this.networkFilter}}}},watch:{wsChartData:function(t,e){this.onRecvWSRealtimeData(t)}},mounted:function(){this.accURL=Object(h["a"])().accURL;var t=this.$store.state.d2admin.symbol.symbol;if(this.originSymbol=t,t){var e=new o["b"](t).distinguish();this.Symbol=e.symbol,this.Minute.Option.Symbol=e.symbol,this.type=e.type,this.CreateMinuteChart()}this.Minute.JSChart&&this.OnSize()},methods:{OnSize:function(t,e){var i="",a="";t?(i=e,a=t):(i=this.chartSize.height,a=this.chartSize.width);var n=this.$refs.minute;n.style.width=a+"px",n.style.height=i+"px",this.Minute.JSChart&&this.Minute.JSChart.OnSize()},CreateMinuteChart:function(){this.Minute.JSChart||(this.Minute.Option.Symbol=this.Symbol,this.chart=r.a.Chart.JSChart.Init(this.$refs.minute),this.chart.SetOption(this.Minute.Option),this.Minute.JSChart=this.chart)},networkFilter:function(t,e){"MarketEventInfo::RequestData"===t.Name&&this.dot(t,e),"MinuteChartContainer::RequestMinuteData"===t.Name&&this.requestMinuteData(t,e)},dot:function(t,e){var i=this.dotData.slice(0),a={};for(var n in i)if(i[n].symbol===this.originSymbol){var s=i[n].date+i[n].symbol;if(a.hasOwnProperty(s))a[s]["data"].push(i[n]["data"]);else{var r={date:"",data:[]};r.date=i[n].date,r.flag=i[n].flag,r.data.push(i[n]["data"]),a[s]=r}}var o=[];for(var h in a)o.push(a[h]);if("future"===this.type)for(var u in o){var l=o[u].date;if(!0===o[u].flag&&Number(this.lastDate)!==l){var m=o[u].date.toString().split("");for(var d in m.splice(4,0,"-"),m.splice(7,0,"-"),m=m.join(""),o[u].date=Number(c()(new Date(m).getTime()+864e5).format("YYYYMMDD")),o[u]["data"])o[u]["data"][d]["Date"]=o[u].date;o[u].flag=!1}}var p={event:[]};p.event=o,e(p),t.PreventDefault=!0},requestMinuteData:function(t,e){this.Cache=null,t.PreventDefault=!0,this.recvMinuteData(null,e)},recvMinuteData:function(t,e){var i,a,n,s,r,h;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.post(this.accURL+"/qaaccount/get_1min_realtime_cache",{code:new o["a"](this.originSymbol).distinguish(),market:this.type},{headers:{"Content-Type":"application/json"}}));case 2:if(i=t.sent,500!==i.code){t.next=5;break}return t.abrupt("return");case 5:for(r in a=i.data,n=a.minute.length-1,a.price=a.minute[n].price,a.name=a.symbol+"-1min",a.symbol.includes(".")||(a.symbol=new o["b"](a.symbol).distinguish().symbol),s=a.minute,a.date=this.dealDate(a.date,"YYMMDD"),a.time=this.dealDate(a.time,"HHMMSS"),s)s[r]["time"]=this.dealDate(s[r]["time"],"HHMM"),s[r]["avprice"]=this.price;h={code:0,stock:[a]},this.Cache=a,this.lastDate=a.date,e(h);case 18:case"end":return t.stop()}}),null,this)},onRecvWSRealtimeData:function(t){if(this.originSymbol.toUpperCase()===t.code&&this.Cache&&this.Cache.minute){var e=JSON.parse(JSON.stringify(this.Cache.minute[0])),i=Object.assign(e,t);if(i["time"]=this.dealDate(i["datetime"],"HHMM"),i["price"]=i["close"],i["avprice"]=this.price,this.Cache.minute.length>0){var a=this.Cache.minute[this.Cache.minute.length-1];a.time===i.time?this.Cache.minute[this.Cache.minute.length-1]=i:this.Cache.minute.push(i)}else this.Cache.minute.push(i);var n=this.Cache.minute.length-1;this.Cache.price=this.Cache.minute[n];var s={code:0,stock:[this.Cache]};this.Minute.JSChart.JSChartContainer.RecvMinuteData(s)}},dealStockData:function(t){t.symbol=new o["b"](t.symbol).distinguish().symbol;var e=t.minute;for(var i in t.date=this.dealDate(t.date,"YYMMDD"),e)e[i]["time"]=this.dealDate(e[i]["time"],"HHMM");return t},dealDate:function(t,e){var i=new Date(t),a=i.getFullYear(),n=i.getMonth()+1,s=i.getDate(),r=i.getHours(),o=i.getMinutes(),h=i.getSeconds();return"YYMMDD"===e?(n=n>=10?n:"0"+n,s=s>=10?s:"0"+s,Number(""+a+n+s)):"HHMM"===e?(o=o>=10?o:"0"+o,Number(""+r+o)):"HHMMSS"===e?(r=r>=10?r:"0"+r,o=o>=10?o:"0"+o,h=h>=10?h:"0"+h,Number(""+r+o+h)):"YY-MM-DD"===e?(n=n>=10?n:"0"+n,s=s>=10?s:"0"+s,"".concat(a,"-").concat(n,"-").concat(s)):void 0},dealSendTime:function(){var t=this.$store.state.d2admin.symbol.time;t||(t=[new Date,new Date]);var e=this.dealDate(t[0],"YY-MM-DD"),i=this.dealDate(t[1],"YY-MM-DD");this.startTime=e+" 08:30:00",this.endTime=i+" 15:30:00"}}},m=l,d=i("2877"),p=Object(d["a"])(m,a,n,!1,null,null,null);e["default"]=p.exports}}]);