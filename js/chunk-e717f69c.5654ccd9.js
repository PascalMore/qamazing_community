(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e717f69c","chunk-106444ba"],{"0084":function(t,e,i){"use strict";function a(){var t=JSON.parse(localStorage.getItem("URL")),e="192.168.2.149",i="quantaxis.tech",a="192.168.2.117",r="192.168.2.124",o="quantaxis.tech",n=t&&t.accURL?t.accURL:"http://".concat(e,":10115"),s=t&&t.pnlURL?t.pnlURL:"http://".concat(e,":8028"),c=t&&t.listURL?t.listURL:"http://".concat(a,":8020"),l=t&&t.wsURL?t.wsURL:"ws://".concat(e,":10115/ws/"),h=t&&t.selectedURL?t.selectedURL:"http://".concat(i,":8022"),u=t&&t.indicatorURL?t.indicatorURL:"http://".concat(e,":8030"),f=t&&t.backtestURL?t.backtestURL:"http://192.168.2.117:8010",d=t&&t.innerURL?t.innerURL:"http://".concat(r,":8028"),p=t&&t.financialURL?t.financialURL:"http://".concat(o,":8018"),b=t&&t.groupURL?t.groupURL:"http://".concat(o,":8018"),g=t&&t.orderURL?t.orderURL:"http://".concat(o,":8018"),v=t&&t.klineURL?t.klineURL:"http://".concat(e,":8029"),_=t&&t.cashURL?t.cashURL:"http://".concat(o,":8020"),m=t&&t.backtestqifiURL?t.backtestqifiURL:"http://".concat(r,":8019"),x=t&&t.varietiesURL?t.varietiesURL:"http://".concat(o,":8018"),w=t&&t.strategyURL?t.strategyURL:"http://192.168.2.125:8800";return{accURL:n,pnlURL:s,listURL:c,wsURL:l,selectedURL:h,indicatorURL:u,backtestURL:f,innerURL:d,financialURL:p,groupURL:b,orderURL:g,klineURL:v,cashURL:_,backtestqifiURL:m,varietiesURL:x,strategyURL:w}}i.d(e,"a",(function(){return a}))},"07ac":function(t,e,i){var a=i("23e7"),r=i("6f53").values;a({target:"Object",stat:!0},{values:function(t){return r(t)}})},1148:function(t,e,i){"use strict";var a=i("a691"),r=i("1d80");t.exports="".repeat||function(t){var e=String(r(this)),i="",o=a(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(i+=e);return i}},"390a":function(t,e,i){"use strict";var a=i("8ada"),r=i.n(a);r.a},"408a":function(t,e,i){var a=i("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},"5e89":function(t,e,i){var a=i("861d"),r=Math.floor;t.exports=function(t){return!a(t)&&isFinite(t)&&r(t)===t}},6785:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("d2-container",{attrs:{type:"full"}},[i("div",{ref:"QIFIbacktest",staticClass:"QIFIbacktest"},[i("div",{staticClass:"left card"},[i("ul",t._l(t.portfolio_list,(function(e,a){return i("li",{key:a,class:{active:t.curLi===a},on:{click:function(i){return t.selectLi(e,a)}}},[t._v(t._s(e))])})),0)]),i("div",{staticClass:"center"},[i("div",{staticClass:"center-top card"},[i("backtest-echart",{ref:"backtestEchart"})],1),i("div",{staticClass:"center-bottom card"},[i("div",{staticClass:"accountTitle"},[i("h2",[t._v("账户")]),i("el-input",{staticClass:"accountInput",attrs:{placeholder:"请输入账户",clearable:""},on:{input:t.inputSearch},model:{value:t.accountValue,callback:function(e){t.accountValue=e},expression:"accountValue"}})],1),i("vxe-table",{style:{width:t.accountTabWidth},attrs:{border:"","show-header-overflow":"","show-overflow":"","highlight-hover-row":"",data:t.searchAccountData,height:"300","auto-resize":"","sort-config":{trigger:"cell"}},on:{"cell-click":t.selectAccount},scopedSlots:t._u([{key:"empty",fn:function(){return[i("span",[i("img",{attrs:{src:"https://xuliangzhan_admin.gitee.io/vxe-table/static/other/img2.gif"}}),i("p",[t._v("不是吧！这就没数据了")])])]},proxy:!0}])},[i("vxe-table-column",{staticClass:"active",attrs:{field:"user_id",title:"账户id","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{class:e.row.balance-e.row.pre_balance>=0?e.row.balance-e.row.pre_balance===0?"":"profit":"loss"},[t._v(t._s(e.row.user_id))])]}}])}),i("vxe-table-column",{attrs:{field:"pre_balance",title:"初始资金",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("toFixed")(e.row.pre_balance)))])]}}])}),i("vxe-table-column",{attrs:{field:"balance",title:"当前权益",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("toFixed")(e.row.balance)))])]}}])}),i("vxe-table-column",{attrs:{field:"available",title:"可用资金",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("toFixed")(e.row.available)))])]}}])}),i("vxe-table-column",{attrs:{field:"float_profit",title:"浮动盈亏",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{class:e.row.float_profit>=0?0===e.row.float_profit?"":"profit":"loss"},[t._v(t._s(t._f("toFixed")(e.row.float_profit)))])]}}])}),i("vxe-table-column",{attrs:{field:"close_profit",title:"平仓盈亏",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{class:e.row.close_profit>=0?0===e.row.close_profit?"":"profit":"loss"},[t._v(t._s(t._f("toFixed")(e.row.close_profit)))])]}}])}),i("vxe-table-column",{attrs:{field:"WithdrawQuota",title:"可取资金",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("toFixed")(e.row.WithdrawQuota)))])]}}])}),i("vxe-table-column",{attrs:{field:"margin",title:"保证金",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("toFixed")(e.row.margin)))])]}}])})],1)],1)]),i("div",{staticClass:"right"},[i("h1",{staticClass:"right-top card"},[t._v(t._s(t.accountCookie))]),i("div",{staticClass:"right-bottom card"},[i("vxe-table",{attrs:{border:"","show-header-overflow":"","show-overflow":"","highlight-hover-row":"",data:t.trade,height:t.tradeHeight,"sort-config":{trigger:"cell"}},on:{"cell-click":t.navigateKline}},[i("vxe-table-column",{attrs:{field:"code",title:"代码"}}),i("vxe-table-column",{attrs:{field:"direction",title:"方向"}}),i("vxe-table-column",{attrs:{field:"offset",title:"标志"}}),i("vxe-table-column",{attrs:{field:"price",title:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",[t._v(t._s(t._f("toFixed")(a.price)))])]}}])}),i("vxe-table-column",{attrs:{field:"volume",title:"手数"}}),i("vxe-table-column",{attrs:{field:"commission",title:"手续费"}}),i("vxe-table-column",{attrs:{field:"datetime",title:"时间","min-width":"80px"}})],1)],1)])])])},r=[],o=(i("4de4"),i("fb6a"),i("a9e3"),i("8ba4"),i("b680"),i("b64b"),i("d3b7"),i("07ac"),i("4d63"),i("25f0"),i("96cf"),i("d515")),n=i("0084"),s={name:"demo-backtest-qifi",data:function(){return{curLi:0,tradeHeight:0,accountValue:"",backtestqifiURL:"http://192.168.2.124:8019",accountlist:[],searchAccountData:[],portfolio_list:[],trade:[],portfolio:"",accountCookie:"",assets:{},monthprofit:{},accountTabWidth:""}},components:{backtestEchart:o["default"]},mounted:function(){this.backtestqifiURL=Object(n["a"])().backtestqifiURL,this.monitor(),this.get_portfoliolist()},filters:{toFixed:function(t){return Number.isInteger(t)?t:t.toFixed(2)}},methods:{monitor:function(){var t=this;this.$erd.listenTo(this.$refs.QIFIbacktest,(function(e){var i=e.offsetWidth,a=e.offsetHeight;t.$refs.backtestEchart.size={width:i-800+"px",height:(a-372)/2+"px"},t.accountTabWidth=i-800+"px",t.tradeHeight=a-70}))},selectLi:function(t,e){this.portfolio=t,this.curLi=e,this.get_accountlist(t)},selectAccount:function(t){var e=t.row;this.init_strategy(e.user_id)},navigateKline:function(){var t=this.$router.resolve({name:"backtestChart"});window.open(t.href+"?account_cookie="+this.accountCookie+"&portfolio_cookie="+this.portfolio+"&market=future_cn&frequence=1min","_blank")},inputSearch:function(){var t=new RegExp(this.accountValue,"i");this.searchAccountData=this.accountlist.filter((function(e,i){return t.test(e.user_id)}))},get_portfoliolist:function(){var t,e;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(this.$http.get(this.backtestqifiURL+"/qifi?action=portfoliolist"));case 2:t=i.sent,e=t.res,this.portfolio_list=e,this.portfolio=this.portfolio_list[0],this.get_accountlist(this.portfolio_list[0]);case 7:case"end":return i.stop()}}),null,this)},get_accountlist:function(t){var e,i;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.$http.get(this.backtestqifiURL+"/qifi?action=accountinportfolio&portfolio="+t));case 2:e=a.sent,i=e.res,this.accountlist=i,this.searchAccountData=this.accountlist.slice(0),this.init_strategy(this.accountlist[0].user_id);case 7:case"end":return a.stop()}}),null,this)},get_assetsthistory:function(t){var e,i,a,r;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(this.$http.get(this.backtestqifiURL+"/qifi?action=acchistory&account_cookie="+t));case 2:e=o.sent,i=e.res,this.assets=i,a=Object.keys(this.assets),r=Object.values(this.assets),this.$refs.backtestEchart.chartOptions1.series[0].data=r,this.$refs.backtestEchart.chartOptions1.xAxis.data=a,this.$refs.backtestEchart.initChart();case 10:case"end":return o.stop()}}),null,this)},get_trade:function(t){var e,i;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.$http.get(this.backtestqifiURL+"/qifi?action=historytrade&account_cookie="+t));case 2:e=a.sent,i=e.res,this.trade=i;case 5:case"end":return a.stop()}}),null,this)},get_monthprofit:function(t){var e,i,a,r;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(this.$http.get(this.backtestqifiURL+"/qifi?action=monthprofit&account_cookie="+t));case 2:e=o.sent,i=e.res,this.monthprofit=i,a=Object.keys(this.monthprofit),r=Object.values(this.monthprofit),this.$refs.backtestEchart.chartOptions2.series[0].data=r,this.$refs.backtestEchart.chartOptions2.xAxis[0].data=a,this.$refs.backtestEchart.initChart();case 10:case"end":return o.stop()}}),null,this)},get_pnl:function(){this.$http.post("http://192.168.2.124:8028/qaaccount/get_qifihis_pnl",{user_cookie:"1",accountCookie:"KTKS_t04b_a2009_30min",portfolio_cookie:"test"},{headers:{"Content-Type":"application/json"}}).then((function(t){console.log(t)}))},reset_data:function(){this.trade=[],this.account_account="",this.assets={},this.monthprofit={}},init_strategy:function(t){this.reset_data(),this.accountCookie=t,this.get_trade(t),this.get_assetsthistory(t),this.get_monthprofit(t)}}},c=s,l=(i("a1ab"),i("2877")),h=Object(l["a"])(c,a,r,!1,null,"2267a0c7",null);e["default"]=h.exports},"6f53":function(t,e,i){var a=i("83ab"),r=i("df75"),o=i("fc6a"),n=i("d1e7").f,s=function(t){return function(e){var i,s=o(e),c=r(s),l=c.length,h=0,u=[];while(l>h)i=c[h++],a&&!n.call(s,i)||u.push(t?[i,s[i]]:s[i]);return u}};t.exports={entries:s(!0),values:s(!1)}},"8ada":function(t,e,i){},"8ba4":function(t,e,i){var a=i("23e7"),r=i("5e89");a({target:"Number",stat:!0},{isInteger:r})},a1ab:function(t,e,i){"use strict";var a=i("b46b"),r=i.n(a);r.a},b46b:function(t,e,i){},b680:function(t,e,i){"use strict";var a=i("23e7"),r=i("a691"),o=i("408a"),n=i("1148"),s=i("d039"),c=1..toFixed,l=Math.floor,h=function(t,e,i){return 0===e?i:e%2===1?h(t,e-1,i*t):h(t*t,e/2,i)},u=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},f=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));a({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,i,a,s,c=o(this),f=r(t),d=[0,0,0,0,0,0],p="",b="0",g=function(t,e){var i=-1,a=e;while(++i<6)a+=t*d[i],d[i]=a%1e7,a=l(a/1e7)},v=function(t){var e=6,i=0;while(--e>=0)i+=d[e],d[e]=l(i/t),i=i%t*1e7},_=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==d[t]){var i=String(d[t]);e=""===e?i:e+n.call("0",7-i.length)+i}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(p="-",c=-c),c>1e-21)if(e=u(c*h(2,69,1))-69,i=e<0?c*h(2,-e,1):c/h(2,e,1),i*=4503599627370496,e=52-e,e>0){g(0,i),a=f;while(a>=7)g(1e7,0),a-=7;g(h(10,a,1),0),a=e-1;while(a>=23)v(1<<23),a-=23;v(1<<a),g(1,1),v(2),b=_()}else g(0,i),g(1<<-e,0),b=_()+n.call("0",f);return f>0?(s=b.length,b=p+(s<=f?"0."+n.call("0",f-s)+b:b.slice(0,s-f)+"."+b.slice(s-f))):b=p+b,b}})},d515:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart"},[i("div",{style:{width:t.size.width,height:t.size.height},attrs:{id:"chart1"}}),i("div",{style:{width:t.size.width,height:t.size.height},attrs:{id:"chart2"}})])},r=[],o={data:function(){return{size:{width:"600px",height:"300px"},chart1:null,chart2:null,chartOptions1:{title:{textStyle:{color:"#999"}},grid:{left:0,top:25,right:10,bottom:20},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none",iconStyle:{shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10,borderType:"dotted"}},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},xAxis:{data:[],zlevel:1,gridIndex:0,axisLabel:{align:"left"}},yAxis:[{},{type:"value",axisLabel:{inside:!0,verticalAlign:"bottom"},axisTick:{inside:!0},name:"account",max:"dataMax",min:"dataMin",axisLine:{lineStyle:{color:"#999"}},splitLine:{show:!0,lineStyle:{color:["rgba(80,80,80, 0.7)"],type:"dashed"}}}],legend:{data:[{name:"assets"},{name:"benchmark"}],x:"left",top:"5%",textStyle:{color:"#999"}},dataZoom:[{type:"slider",show:!1,fillerColor:"#999",realtime:!0,start:0,end:100,backgroundColor:"#303030",showDataShadow:!1}],series:[{name:"assets",type:"line",data:[],lineStyle:{normal:{color:"#c23531"}},areaStyle:{normal:{color:"#c23531",opacity:.3}},yAxisIndex:1},{name:"benchmark",type:"line",data:[],lineStyle:{normal:{color:"#2f4554"}},areaStyle:{normal:{color:"#2f4554",opacity:.3}},yAxisIndex:1}]},chartOptions2:{title:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:20,left:0,right:10,bottom:0},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value",axisLabel:{inside:!0,verticalAlign:"bottom"},axisTick:{inside:!0},position:"right",axisLine:{lineStyle:{color:"#999"}},splitLine:{show:!0,lineStyle:{color:["rgba(80,80,80, 0.7)"],type:"dashed"}}}],series:[{name:"monthporfit",type:"bar",data:[],itemStyle:{normal:{color:function(t){return t.value<0?"#51b9b8":"#c23531"},opacity:.6}}}]}}},watch:{size:{handler:function(t){(this.chart1||this.chart2)&&(this.chart1.resize({width:t.width,height:t.height}),this.chart2.resize({width:t.width,height:t.height}))},deep:!0}},methods:{initChart:function(){this.chart1=this.$echarts.init(document.getElementById("chart1")),this.chart1.setOption(this.chartOptions1),this.chart2=this.$echarts.init(document.getElementById("chart2")),this.chart2.setOption(this.chartOptions2)}}},n=o,s=(i("390a"),i("2877")),c=Object(s["a"])(n,a,r,!1,null,null,null);e["default"]=c.exports}}]);